{"source":2,"revision":196,"description":null,"createdBy":{"displayName":"Holger Schwichtenberg (D)","url":"https://spsprodcus1.vssps.visualstudio.com/A7fbad96a-dc90-4656-af24-f37c38c5694b/_apis/Identities/942359e8-00c3-6863-a12a-044cd7fe511c","_links":{"avatar":{"href":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"}},"id":"942359e8-00c3-6863-a12a-044cd7fe511c","uniqueName":"HSDemo@IT-Visions.de","imageUrl":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj","descriptor":"msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"},"createdOn":"2018-02-07T11:47:47.200Z","modifiedBy":{"displayName":"Holger Schwichtenberg (D)","url":"https://spsprodcus1.vssps.visualstudio.com/A7fbad96a-dc90-4656-af24-f37c38c5694b/_apis/Identities/942359e8-00c3-6863-a12a-044cd7fe511c","_links":{"avatar":{"href":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"}},"id":"942359e8-00c3-6863-a12a-044cd7fe511c","uniqueName":"HSDemo@IT-Visions.de","imageUrl":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj","descriptor":"msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"},"modifiedOn":"2019-12-03T15:54:38.100Z","isDeleted":false,"lastRelease":{"id":536,"name":"Release-265","artifacts":[],"_links":{},"description":"Triggered by MiracleListBackend-CI 0.12.4.754.","releaseDefinition":{"id":1,"projectReference":null,"_links":{}},"createdOn":"2019-12-03T19:49:34.730Z","createdBy":{"displayName":"Dr. Holger Schwichtenberg","url":"https://spsprodcus1.vssps.visualstudio.com/A7fbad96a-dc90-4656-af24-f37c38c5694b/_apis/Identities/0a31ed99-da1e-4412-913b-5da20050c88f","_links":{"avatar":{"href":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.N2NlNTFmMWYtODBhYy03MzVlLThmOWEtY2FhNzgyNjAzNGQz"}},"id":"0a31ed99-da1e-4412-913b-5da20050c88f","uniqueName":"hs@IT-Visions.de","imageUrl":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.N2NlNTFmMWYtODBhYy03MzVlLThmOWEtY2FhNzgyNjAzNGQz","descriptor":"msa.N2NlNTFmMWYtODBhYy03MzVlLThmOWEtY2FhNzgyNjAzNGQz"}},"variables":{"System.Debug":{"value":"false"}},"variableGroups":[],"environments":[{"id":1,"name":"Staging","rank":1,"owner":{"displayName":"Holger Schwichtenberg (D)","url":"https://spsprodcus1.vssps.visualstudio.com/A7fbad96a-dc90-4656-af24-f37c38c5694b/_apis/Identities/942359e8-00c3-6863-a12a-044cd7fe511c","_links":{"avatar":{"href":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"}},"id":"942359e8-00c3-6863-a12a-044cd7fe511c","uniqueName":"HSDemo@IT-Visions.de","imageUrl":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj","descriptor":"msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"},"variables":{"ApplicationInsights.InstrumentationKey":{"value":"c080655a-d8e2-414f-a02a-bcee817d7a1c"},"ConnectionStrings:MiracleListDB":{"value":"Server=tcp:miraclelistdb-staging.database.windows.net,1433;Initial Catalog=MiracleListDB-Staging;Persist Security Info=False;User ID=miraclelistdb-staging;Password=0d4301c6-4955-422a-a2ed-9821bcae3bb2;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;"},"ConnectionStrings.MiracleListDB":{"value":"Server=tcp:miraclelistdb-staging.database.windows.net,1433;Initial Catalog=MiracleListDB-Staging;Persist Security Info=False;User ID=miraclelistdb-staging;Password=0d4301c6-4955-422a-a2ed-9821bcae3bb2;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;"},"URL":{"value":"web-mlbackend-staging.azurewebsites.net"}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":1}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":2},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":3}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":null,"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[{"alias":"MiracleListBackend-CI","artifactType":"Build","artifactDownloadMode":"All","artifactItems":[]}]},"queueId":24,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Run on agent","refName":null,"workflowTasks":[{"environment":{},"taskId":"b0ce7256-7898-45d3-9cb5-176b752bfea6","version":"0.*","name":"Use .NET Core SDK 2.2.207","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"packageType":"sdk","version":"2.2.104"}},{"environment":{},"taskId":"b0ce7256-7898-45d3-9cb5-176b752bfea6","version":"2.*","name":"Use .Net Core sdk  -- geht nicht Ã¼ber global.json, weil es diese Datei nicht mehr gibt!","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"packageType":"sdk","useGlobalJson":"true","workingDirectory":"","version":"","includePreviewVersions":"false","installationPath":"$(Agent.ToolsDirectory)/dotnet","performMultiLevelLookup":"false"}},{"environment":{},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Deploy or Update DB Schema","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"dotnet EFCTools.dll migrate createtestuser","workingDirectory":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/EFCTools","failOnStderr":"false"}},{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"PowerShell: Set AppInfo.ReleaseDate to current DateTime","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Set variable \"AppInfo.ReleaseDate\" which will be used by the \"Azure App Service Deploy\" task to replace values in the appsettings.json file\n\nWrite-Host \"##vso[task.setvariable variable=AppInfo.ReleaseDate;]$(Get-Date -Format r)\"","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"4.*","name":"Deploy Azure App Service","refName":"AzureRmWebAppDeployment1","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":null,"overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectionType":"AzureRM","ConnectedServiceName":"e1b32c4f-5679-4a38-9b5b-a4579ff1f168","PublishProfilePath":"$(System.DefaultWorkingDirectory)/**/*.pubxml","PublishProfilePassword":"","WebAppKind":"webApp","WebAppName":"Web-MLBackend-Staging","DeployToSlotOrASEFlag":"false","ResourceGroupName":"","SlotName":"production","DockerNamespace":"","DockerRepository":"","DockerImageTag":"$(Build.BuildId)","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)\\**\\Miraclelist.zip","RuntimeStack":"","RuntimeStackFunction":"","StartupCommand":"","ScriptType":"","InlineScript":"","ScriptPath":"","WebConfigParameters":"","AppSettings":"","ConfigurationSettings":"","UseWebDeploy":"false","DeploymentType":"webDeploy","TakeAppOfflineFlag":"true","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"false","AdditionalArguments":"","RenameFilesFlag":"true","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":"appsettings.json\nappsettings.Development.json"}},{"environment":{},"taskId":"2c65196a-54fd-4a02-9be8-d9d1837b7111","version":"1.*","name":"Configure VSTest Platform","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"packageFeedSelector":"nugetOrg","versionSelector":"latestStable","testPlatformVersion":"","customFeed":"","username":"","password":"","netShare":""}},{"environment":{},"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"Run Unit Tests as Integration Tests","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"MiracleListBackend-CI/UnitTests/UnitTests.dll","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"False","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"toolsInstaller","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","pathtoCustomTestAdapters":"","runInParallel":"False","runTestsInIsolation":"False","codeCoverageEnabled":"False","otherConsoleOptions":"","distributionBatchType":"basedOnTestCases","batchingBasedOnAgentsOption":"autoBatchSize","customBatchSizeValue":"10","batchingBasedOnExecutionTimeOption":"autoBatchSize","customRunTimePerBatchValue":"60","dontDistribute":"False","testRunTitle":"Integration Tests","platform":"","configuration":"$(Release.EnvironmentName)","publishRunAttachments":"true","diagnosticsEnabled":"True","collectDumpOn":"onAbortOnly","rerunFailedTests":"False","rerunType":"basedOnTestFailurePercentage","rerunFailedThreshold":"30","rerunFailedTestCasesMaxLimit":"5","rerunMaxAttempts":"3"}},{"environment":{},"taskId":"31c75bbb-bcdf-4706-8d7c-4da6a1959bc2","version":"0.*","name":"Use Node 8.x (for Newman)","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"versionSpec":"8.x","checkLatest":"false"}},{"environment":{},"taskId":"fe47e961-9fa8-4106-8639-368c022d43ad","version":"1.*","name":"npm install newman","refName":"Task4","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"command":"custom","workingDir":"","verbose":"false","customCommand":"install newman -g","customRegistry":"useNpmrc","customFeed":"","customEndpoint":"","publishRegistry":"useExternalRegistry","publishFeed":"","publishPackageMetadata":"true","publishEndpoint":""}},{"environment":{},"taskId":"9240b5c1-a1b2-4799-9325-e071c63236fb","version":"1.*","name":"Replace URL in postman_environment.json","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"sourcePath":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/PostmanTests/","filePattern":"MiracleList-APITests.postman_environment.json","tokenRegex":"__(\\w+)__","secretTokens":""}},{"environment":{},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Run newman (Postman HTTP Tests)","refName":"Task5","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"newman run MiracleList-APITests.postman_collection.json -e MiracleList-APITests.postman_environment.json --disable-unicode --reporters cli,junit --reporter-junit-export TestResults/newman-run-report.xml","workingDirectory":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/PostmanTests","failOnStderr":"false"}},{"environment":{},"taskId":"0b0f01ed-7dde-43ff-9cbb-e48954daf9b1","version":"2.*","name":"Publish Test Results from Postman","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeededOrFailed()","inputs":{"testRunner":"JUnit","testResultsFiles":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/PostmanTests/TestResults/*.xml","searchFolder":"$(System.DefaultWorkingDirectory)","mergeTestResults":"false","failTaskOnFailedTests":"true","testRunTitle":"Postman HTTP Tests","platform":"","configuration":"$(Release.EnvironmentName)","publishRunAttachments":"true"}},{"environment":{},"taskId":"f20661eb-e0f7-4afd-9a86-9fe9d1a93382","version":"1.*","name":"Apache JMeter Test MLLoadTests.jmx","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceName":"","TestDrop":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/PostmanTests","LoadTest":"MLLoadTests.jmx","agentCount":"1","runDuration":"5","geoLocation":"Default","machineType":"0"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":true,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":536,"url":"https://nlhsdemo.vsrm.visualstudio.com/71a63bec-1970-43b4-a4bc-ce6293a9997a/_apis/Release/releases/536","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://nlhsdemo.vsrm.visualstudio.com/_apis/public/Release/badge/71a63bec-1970-43b4-a4bc-ce6293a9997a/1/1"},{"id":9,"name":"Produktion","rank":2,"owner":{"displayName":"Holger Schwichtenberg (D)","url":"https://spsprodcus1.vssps.visualstudio.com/A7fbad96a-dc90-4656-af24-f37c38c5694b/_apis/Identities/942359e8-00c3-6863-a12a-044cd7fe511c","_links":{"avatar":{"href":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"}},"id":"942359e8-00c3-6863-a12a-044cd7fe511c","uniqueName":"HSDemo@IT-Visions.de","imageUrl":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj","descriptor":"msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"},"variables":{"ApplicationInsights.InstrumentationKey":{"value":"d790d8df-a378-4db5-ab26-c724f680be72"},"ConnectionStrings:MiracleListDB":{"value":"Server=tcp:miraclelistdb-produktion.database.windows.net,1433;Initial Catalog=MiracleListDB-Produktion;Persist Security Info=False;User ID=miraclelistdb-produktion ;Password=0d4301c6-4955-422a-a2ed-9821bcae3bb2;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;"},"ConnectionStrings.MiracleListDB":{"value":"Server=tcp:miraclelistdb-produktion.database.windows.net,1433;Initial Catalog=MiracleListDB-Produktion;Persist Security Info=False;User ID=miraclelistdb-produktion ;Password=0d4301c6-4955-422a-a2ed-9821bcae3bb2;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;"},"URL":{"value":"web-mlbackend-production-prodstaging.azurewebsites.net"}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Dr. Holger Schwichtenberg","url":"https://spsprodcus1.vssps.visualstudio.com/A7fbad96a-dc90-4656-af24-f37c38c5694b/_apis/Identities/0a31ed99-da1e-4412-913b-5da20050c88f","_links":{"avatar":{"href":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.N2NlNTFmMWYtODBhYy03MzVlLThmOWEtY2FhNzgyNjAzNGQz"}},"id":"0a31ed99-da1e-4412-913b-5da20050c88f","uniqueName":"hs@IT-Visions.de","imageUrl":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.N2NlNTFmMWYtODBhYy03MzVlLThmOWEtY2FhNzgyNjAzNGQz","descriptor":"msa.N2NlNTFmMWYtODBhYy03MzVlLThmOWEtY2FhNzgyNjAzNGQz"},"id":34},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Holger Schwichtenberg (D)","url":"https://spsprodcus1.vssps.visualstudio.com/A7fbad96a-dc90-4656-af24-f37c38c5694b/_apis/Identities/942359e8-00c3-6863-a12a-044cd7fe511c","_links":{"avatar":{"href":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"}},"id":"942359e8-00c3-6863-a12a-044cd7fe511c","uniqueName":"HSDemo@IT-Visions.de","imageUrl":"https://nlhsdemo.visualstudio.com/_apis/GraphProfile/MemberAvatars/msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj","descriptor":"msa.OTQyMzU5ZTgtMDBjMy03ODYzLWExMmEtMDQ0Y2Q3ZmU1MTFj"},"id":35}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":32},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":33}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":null,"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[{"alias":"MiracleListBackend-CI","artifactType":"Build","artifactDownloadMode":"All","artifactItems":[]}]},"queueId":24,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Run on agent","refName":null,"workflowTasks":[{"environment":{},"taskId":"b0ce7256-7898-45d3-9cb5-176b752bfea6","version":"0.*","name":"Use .NET Core SDK 2.2.104","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"packageType":"sdk","version":"2.2.104"}},{"environment":{},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Deploy or Update DB Schema","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"dotnet EFCTools.dll migrate createtestuser","workingDirectory":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/EFCTools","failOnStderr":"false"}},{"environment":{},"taskId":"2c65196a-54fd-4a02-9be8-d9d1837b7111","version":"1.*","name":"Configure VSTest Platform","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"packageFeedSelector":"nugetOrg","versionSelector":"latestStable","testPlatformVersion":"","customFeed":"","username":"","password":"","netShare":""}},{"environment":{},"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"Run Unit Tests as Integration Tests","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"MiracleListBackend-CI/UnitTests/UnitTests.dll","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"False","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"toolsInstaller","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","pathtoCustomTestAdapters":"","runInParallel":"False","runTestsInIsolation":"False","codeCoverageEnabled":"False","otherConsoleOptions":"","distributionBatchType":"basedOnTestCases","batchingBasedOnAgentsOption":"autoBatchSize","customBatchSizeValue":"10","batchingBasedOnExecutionTimeOption":"autoBatchSize","customRunTimePerBatchValue":"60","dontDistribute":"False","testRunTitle":"Integration Tests","platform":"","configuration":"$(Release.EnvironmentName)","publishRunAttachments":"true","diagnosticsEnabled":"True","collectDumpOn":"onAbortOnly","rerunFailedTests":"False","rerunType":"basedOnTestFailurePercentage","rerunFailedThreshold":"30","rerunFailedTestCasesMaxLimit":"5","rerunMaxAttempts":"3"}},{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"PowerShell: Set AppInfo.ReleaseDate to current DateTime","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Set variable \"AppInfo.ReleaseDate\" which will be used by the \"Azure App Service Deploy\" task to replace values in the appsettings.json file\n\nWrite-Host \"##vso[task.setvariable variable=AppInfo.ReleaseDate;]$(Get-Date -Format r)\"","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"4.*","name":"Deploy Azure App Service","refName":"AzureRmWebAppDeployment1","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":null,"overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectionType":"AzureRM","ConnectedServiceName":"e1b32c4f-5679-4a38-9b5b-a4579ff1f168","PublishProfilePath":"$(System.DefaultWorkingDirectory)/**/*.pubxml","PublishProfilePassword":"","WebAppKind":"webApp","WebAppName":"Web-MLBackend-Production","DeployToSlotOrASEFlag":"true","ResourceGroupName":"RG-DEMO-MiracleList-DevOps","SlotName":"ProdStaging","DockerNamespace":"","DockerRepository":"","DockerImageTag":"$(Build.BuildId)","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)\\**\\Miraclelist.zip","RuntimeStack":"","RuntimeStackFunction":"","StartupCommand":"","ScriptType":"","InlineScript":"","ScriptPath":"","WebConfigParameters":"","AppSettings":"","ConfigurationSettings":"","UseWebDeploy":"false","DeploymentType":"webDeploy","TakeAppOfflineFlag":"true","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"false","AdditionalArguments":"","RenameFilesFlag":"true","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":"appsettings.json\nappsettings.Development.json"}},{"environment":{},"taskId":"31c75bbb-bcdf-4706-8d7c-4da6a1959bc2","version":"1.*","name":"Use Node 8.x (for Newman)","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"version":"8.x","checkLatest":"false"}},{"environment":{},"taskId":"fe47e961-9fa8-4106-8639-368c022d43ad","version":"1.*","name":"npm install newman","refName":"Task4","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"command":"custom","workingDir":"","verbose":"false","customCommand":"install newman -g","customRegistry":"useNpmrc","customFeed":"","customEndpoint":"","publishRegistry":"useExternalRegistry","publishFeed":"","publishPackageMetadata":"true","publishEndpoint":""}},{"environment":{},"taskId":"9240b5c1-a1b2-4799-9325-e071c63236fb","version":"1.*","name":"Replace URL in postman_environment.json","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"sourcePath":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/PostmanTests/","filePattern":"MiracleList-APITests.postman_environment.json","tokenRegex":"__(\\w+)__","secretTokens":""}},{"environment":{},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Run newman (Postman HTTP Tests)","refName":"Task5","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"newman run MiracleList-APITests.postman_collection.json -e MiracleList-APITests.postman_environment.json --disable-unicode --reporters cli,junit --reporter-junit-export TestResults/newman-run-report.xml","workingDirectory":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/PostmanTests","failOnStderr":"false"}},{"environment":{},"taskId":"0b0f01ed-7dde-43ff-9cbb-e48954daf9b1","version":"2.*","name":"Publish Test Results from Postman","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeededOrFailed()","inputs":{"testRunner":"JUnit","testResultsFiles":"$(System.DefaultWorkingDirectory)/MiracleListBackend-CI/PostmanTests/TestResults/*.xml","searchFolder":"$(System.DefaultWorkingDirectory)","mergeTestResults":"false","failTaskOnFailedTests":"true","testRunTitle":"Postman HTTP Tests","platform":"","configuration":"$(Release.EnvironmentName)","publishRunAttachments":"true"}},{"environment":{},"taskId":"f045e430-8704-11e6-968f-e717e6411619","version":"0.*","name":"Swap Slots: Web-MLBackend-Production","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"e1b32c4f-5679-4a38-9b5b-a4579ff1f168","Action":"Swap Slots","WebAppName":"Web-MLBackend-Production","SpecifySlot":"false","ResourceGroupName":"RG-DEMO-MiracleList-DevOps","SourceSlot":"ProdStaging","SwapWithProduction":"true","TargetSlot":"","PreserveVnet":"false","Slot":"production","ExtensionsList":"","OutputVariable":"","AppInsightsResourceGroupName":"","ApplicationInsightsResourceName":"","ApplicationInsightsWebTestName":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":true,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Staging","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":503,"url":"https://nlhsdemo.vsrm.visualstudio.com/71a63bec-1970-43b4-a4bc-ce6293a9997a/_apis/Release/releases/503","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://nlhsdemo.vsrm.visualstudio.com/_apis/public/Release/badge/71a63bec-1970-43b4-a4bc-ce6293a9997a/1/9"}],"artifacts":[{"sourceId":"71a63bec-1970-43b4-a4bc-ce6293a9997a:1","type":"Build","alias":"MiracleListBackend-CI","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://nlhsdemo.visualstudio.com/_permalink/_build/index?collectionId=2071e555-3459-498c-9e6f-c526fd72ab61&projectId=71a63bec-1970-43b4-a4bc-ce6293a9997a&definitionId=1","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"1","name":"MiracleList_WebAPI-CI"},"project":{"id":"71a63bec-1970-43b4-a4bc-ce6293a9997a","name":"MiracleList"}},"isPrimary":true,"isRetained":false}],"triggers":[{"artifactAlias":"MiracleListBackend-CI","triggerConditions":[{"sourceBranch":"master","tags":[],"tagFilter":null,"useBuildDefinitionBranch":false,"createReleaseOnBuildTagging":false}],"triggerType":1}],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"BuildSummary"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"}},"id":1,"name":"MiracleListBackend-CD","path":"\\","projectReference":null,"url":"https://nlhsdemo.vsrm.visualstudio.com/71a63bec-1970-43b4-a4bc-ce6293a9997a/_apis/Release/definitions/1","_links":{"self":{"href":"https://nlhsdemo.vsrm.visualstudio.com/71a63bec-1970-43b4-a4bc-ce6293a9997a/_apis/Release/definitions/1"},"web":{"href":"https://nlhsdemo.visualstudio.com/71a63bec-1970-43b4-a4bc-ce6293a9997a/_release?definitionId=1"}}}